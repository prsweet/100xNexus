generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model users {
  id         String     @id @default(cuid())
  name       String
  email      String     @unique
  password   String
  role       Role       @default(contestee)
  created_at DateTime   @default(now())
  contests   contests[]
}

model contests {
  id            String          @id @default(cuid())
  title         String
  description   String?
  creator_id    String
  start_time    DateTime
  end_time      DateTime
  created_at    DateTime        @default(now())
  author        users           @relation(fields: [creator_id], references: [id])
  dsa_problems  dsa_problems[]
  mcq_questions mcq_questions[]
}

model mcq_questions {
  id                   String   @id @default(cuid())
  contest_id           String
  question_text        String
  options              String[]
  correct_option_index Int
  points               Int      @default(1)
  created_at           DateTime @default(now())
  contest              contests @relation(fields: [contest_id], references: [id])
}

model dsa_problems {
  id           String   @id @default(cuid())
  contest_id   String
  title        String
  description  String?
  tags         String[]
  points       Int      @default(100)
  time_limit   Int      @default(2000)
  memory_limit Int      @default(256)
  created_at   DateTime @default(now())
  contest      contests @relation(fields: [contest_id], references: [id])
}

enum Role {
  creator
  contestee
}
